<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><title>Simulate design matrix — simulate_data • simdata</title><script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><link href="../deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet"><script src="../deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><link href="../deps/font-awesome-6.5.2/css/all.min.css" rel="stylesheet"><link href="../deps/font-awesome-6.5.2/css/v4-shims.min.css" rel="stylesheet"><script src="../deps/headroom-0.11.0/headroom.min.js"></script><script src="../deps/headroom-0.11.0/jQuery.headroom.min.js"></script><script src="../deps/bootstrap-toc-1.0.1/bootstrap-toc.min.js"></script><script src="../deps/clipboard.js-2.0.11/clipboard.min.js"></script><script src="../deps/search-1.0.0/autocomplete.jquery.min.js"></script><script src="../deps/search-1.0.0/fuse.min.js"></script><script src="../deps/search-1.0.0/mark.min.js"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="Simulate design matrix — simulate_data"><meta name="description" content="Generate simulated dataset based on transformation of
an underlying base distribution."><meta property="og:description" content="Generate simulated dataset based on transformation of
an underlying base distribution."></head><body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>


    <nav class="navbar navbar-expand-lg fixed-top bg-light" data-bs-theme="light" aria-label="Site navigation"><div class="container">

    <a class="navbar-brand me-2" href="../index.html">simdata</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">0.4.1</small>


    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto"><li class="active nav-item"><a class="nav-link" href="../reference/index.html">Reference</a></li>
<li class="nav-item dropdown">
  <button class="nav-link dropdown-toggle" type="button" id="dropdown-articles" data-bs-toggle="dropdown" aria-expanded="false" aria-haspopup="true">Articles</button>
  <ul class="dropdown-menu" aria-labelledby="dropdown-articles"><li><a class="dropdown-item" href="../articles/Demo.html">simdata: A package for creating simulated datasets</a></li>
    <li><a class="dropdown-item" href="../articles/NORTA_demo.html">simdata: NORTA based simulation designs</a></li>
    <li><a class="dropdown-item" href="../articles/Technical_documentation.html">simdata: Technical documentation</a></li>
  </ul></li>
<li class="nav-item"><a class="nav-link" href="../news/index.html">Changelog</a></li>
      </ul><ul class="navbar-nav"><li class="nav-item"><form class="form-inline" role="search">
 <input class="form-control" type="search" name="search-input" id="search-input" autocomplete="off" aria-label="Search site" placeholder="Search for" data-search-index="../search.json"></form></li>
<li class="nav-item"><a class="external-link nav-link" href="https://github.com/matherealize/simdata/" aria-label="GitHub"><span class="fa fab fa-github fa-lg"></span></a></li>
      </ul></div>


  </div>
</nav><div class="container template-reference-topic">
<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">

      <h1>Simulate design matrix</h1>
      <small class="dont-index">Source: <a href="https://github.com/matherealize/simdata/blob/main/R/simulate_data.R" class="external-link"><code>R/simulate_data.R</code></a></small>
      <div class="d-none name"><code>simulate_data.Rd</code></div>
    </div>

    <div class="ref-description section level2">
    <p>Generate simulated dataset based on transformation of
an underlying base distribution.</p>
    </div>

    <div class="section level2">
    <h2 id="ref-usage">Usage<a class="anchor" aria-label="anchor" href="#ref-usage"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span><span class="fu">simulate_data</span><span class="op">(</span><span class="va">generator</span>, <span class="va">...</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Default S3 method</span></span>
<span><span class="fu">simulate_data</span><span class="op">(</span></span>
<span>  generator <span class="op">=</span> <span class="kw">function</span><span class="op">(</span><span class="va">n</span><span class="op">)</span> <span class="fu"><a href="https://rdrr.io/r/base/matrix.html" class="external-link">matrix</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/stats/Normal.html" class="external-link">rnorm</a></span><span class="op">(</span><span class="va">n</span><span class="op">)</span><span class="op">)</span>,</span>
<span>  n_obs <span class="op">=</span> <span class="fl">1</span>,</span>
<span>  transform_initial <span class="op">=</span> <span class="fu">base</span><span class="fu">::</span><span class="va"><a href="https://rdrr.io/r/base/identity.html" class="external-link">identity</a></span>,</span>
<span>  names_final <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  prefix_final <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  process_final <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span><span class="op">)</span>,</span>
<span>  seed <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  <span class="va">...</span></span>
<span><span class="op">)</span></span>
<span></span>
<span><span class="co"># S3 method for class 'simdesign'</span></span>
<span><span class="fu">simulate_data</span><span class="op">(</span></span>
<span>  <span class="va">generator</span>,</span>
<span>  n_obs <span class="op">=</span> <span class="fl">1</span>,</span>
<span>  seed <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  apply_transformation <span class="op">=</span> <span class="cn">TRUE</span>,</span>
<span>  apply_processing <span class="op">=</span> <span class="cn">TRUE</span>,</span>
<span>  <span class="va">...</span></span>
<span><span class="op">)</span></span></code></pre></div>
    </div>

    <div class="section level2">
    <h2 id="arguments">Arguments<a class="anchor" aria-label="anchor" href="#arguments"></a></h2>


<dl><dt id="arg-generator">generator<a class="anchor" aria-label="anchor" href="#arg-generator"></a></dt>
<dd><p>Function which generates data from the underlying base distribution. It is
assumed it takes the number of simulated observations <code>n_obs</code> as first
argument, as all random generation functions in the <span class="pkg">stats</span> and
<span class="pkg">extraDistr</span> do. Furthermore, it is expected to return a two-dimensional
array as output (matrix or data.frame). Alternatively an R object derived
from the <code><a href="simdesign.html">simdata::simdesign</a></code> class. See details.</p></dd>


<dt id="arg--">...<a class="anchor" aria-label="anchor" href="#arg--"></a></dt>
<dd><p>Further arguments passed to <code>generator</code> function.</p></dd>


<dt id="arg-n-obs">n_obs<a class="anchor" aria-label="anchor" href="#arg-n-obs"></a></dt>
<dd><p>Number of simulated observations.</p></dd>


<dt id="arg-transform-initial">transform_initial<a class="anchor" aria-label="anchor" href="#arg-transform-initial"></a></dt>
<dd><p>Function which specifies the transformation of the underlying
dataset <code>Z</code> to final dataset <code>X</code>. See details.</p></dd>


<dt id="arg-names-final">names_final<a class="anchor" aria-label="anchor" href="#arg-names-final"></a></dt>
<dd><p>NULL or character vector with variable names for final dataset <code>X</code>.
Length needs to equal the number of columns of <code>X</code>.
Overrides other naming options. See details.</p></dd>


<dt id="arg-prefix-final">prefix_final<a class="anchor" aria-label="anchor" href="#arg-prefix-final"></a></dt>
<dd><p>NULL or prefix attached to variables in final dataset <code>X</code>. Overriden
by <code>names_final</code> argument. Set to NULL if no prefixes should
be added. See details.</p></dd>


<dt id="arg-process-final">process_final<a class="anchor" aria-label="anchor" href="#arg-process-final"></a></dt>
<dd><p>List of lists specifying post-processing functions applied to final
datamatrix <code>X</code> before returning it. See <code><a href="do_processing.html">do_processing</a></code>.</p></dd>


<dt id="arg-seed">seed<a class="anchor" aria-label="anchor" href="#arg-seed"></a></dt>
<dd><p>Set random seed to ensure reproducibility of results.</p></dd>


<dt id="arg-apply-transformation">apply_transformation<a class="anchor" aria-label="anchor" href="#arg-apply-transformation"></a></dt>
<dd><p>This argument can be set to FALSE to override the information stored in the
passed <code>simdesign</code> object and not transform and process data.
Thus, the raw data from the design generator is returned. This can be useful
for debugging purposes.</p></dd>


<dt id="arg-apply-processing">apply_processing<a class="anchor" aria-label="anchor" href="#arg-apply-processing"></a></dt>
<dd><p>This argument can be set to FALSE to override the information stored in the
passed <code>simdesign</code> object and not transform and process data after
the initial data is transformed. This can be useful for debugging purposes.</p></dd>

</dl></div>
    <div class="section level2">
    <h2 id="value">Value<a class="anchor" aria-label="anchor" href="#value"></a></h2>
    <p>Data.frame or matrix with <code>n_obs</code> rows for simulated dataset <code>X</code>.</p>
    </div>
    <div class="section level2">
    <h2 id="details">Details<a class="anchor" aria-label="anchor" href="#details"></a></h2>
    <p>Data is generated using the following procedure:</p><ol><li><p>An underlying dataset <code>Z</code> is sampled from some distribution. This is
done by a call to the <code>generator</code> function.</p></li>
<li><p><code>Z</code> is then transformed into the final dataset <code>X</code> by applying the
<code>transform</code> function to <code>Z</code>.</p></li>
<li><p><code>X</code> is post-processed if specified (e.g. truncation to avoid
outliers).</p></li>
</ol></div>
    <div class="section level2">
    <h2 id="methods-by-class-">Methods (by class)<a class="anchor" aria-label="anchor" href="#methods-by-class-"></a></h2>

<ul><li><p><code>simulate_data(default)</code>: Function to be used if no <code><a href="simdesign.html">simdesign</a></code>
S3 class is used.</p></li>
<li><p><code>simulate_data(simdesign)</code>: Function to be used with <code><a href="simdesign.html">simdesign</a></code>
S3 class.</p></li>
</ul></div>
    <div class="section level2">
    <h2 id="note">Note<a class="anchor" aria-label="anchor" href="#note"></a></h2>
    <p>This function is best used in conjunction with the <code><a href="simdesign.html">simdesign</a></code>
S3 class or any template based upon it, which facilitates further data
visualization and conveniently stores information as a template for
simulation tasks.</p>
    </div>
    <div class="section level2">
    <h2 id="generators">Generators<a class="anchor" aria-label="anchor" href="#generators"></a></h2>


<p>The <code>generator</code> function which is either passed directly, or via a
<code><a href="simdesign.html">simdata::simdesign</a></code> object, is assumed to provide the same interface
as the random generation functions in the R <span class="pkg">stats</span> and <span class="pkg">extraDistr</span>
packages. Specifically, that means it takes the number of observations as
first argument. All further arguments can be set via passing them as
named argument to this function. It is expected to return a two-dimensional
array (matrix or data.frame) for which the number of columns can be
determined. Otherwise the <code>check_and_infer</code> step will fail.</p>
    </div>
    <div class="section level2">
    <h2 id="transformations">Transformations<a class="anchor" aria-label="anchor" href="#transformations"></a></h2>


<p>Transformations should be applicable to the output of the <code>generator</code>
function (i.e. take a data.frame or matrix as input) and output another
data.frame or matrix. A convenience function <code><a href="function_list.html">function_list</a></code> is
provided by this package to specify transformations as a list of functions,
which take the whole datamatrix <code>Z</code> as single argument and can be used to
apply specific transformations to the columns of that matrix. See the
documentation for <code><a href="function_list.html">function_list</a></code> for details.</p>
    </div>
    <div class="section level2">
    <h2 id="post-processing">Post-processing<a class="anchor" aria-label="anchor" href="#post-processing"></a></h2>


<p>Post-processing the datamatrix is based on <code><a href="do_processing.html">do_processing</a></code>.</p>
    </div>
    <div class="section level2">
    <h2 id="naming-of-variables">Naming of variables<a class="anchor" aria-label="anchor" href="#naming-of-variables"></a></h2>


<p>Variables are named by <code>names_final</code> if not NULL and of correct length.
Otherwise, if <code>prefix_final</code> is not NULL, it is used as prefix for variable
numbers. Otherwise, variables names remain as returned by the <code>generator</code>
function.</p>
    </div>
    <div class="section level2">
    <h2 id="see-also">See also<a class="anchor" aria-label="anchor" href="#see-also"></a></h2>
    <div class="dont-index"><p><code><a href="simdesign.html">simdesign</a></code>,
<code><a href="simdesign_mvtnorm.html">simdesign_mvtnorm</a></code>,
<code><a href="simulate_data_conditional.html">simulate_data_conditional</a></code>,
<code><a href="do_processing.html">do_processing</a></code></p></div>
    </div>

    <div class="section level2">
    <h2 id="ref-examples">Examples<a class="anchor" aria-label="anchor" href="#ref-examples"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span class="r-in"><span><span class="va">generator</span> <span class="op">&lt;-</span> <span class="kw">function</span><span class="op">(</span><span class="va">n</span><span class="op">)</span> <span class="fu">mvtnorm</span><span class="fu">::</span><span class="fu"><a href="https://rdrr.io/pkg/mvtnorm/man/Mvnorm.html" class="external-link">rmvnorm</a></span><span class="op">(</span><span class="va">n</span>, mean <span class="op">=</span> <span class="fl">0</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="fu">simulate_data</span><span class="op">(</span><span class="va">generator</span>, <span class="fl">10</span>, seed <span class="op">=</span> <span class="fl">24</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span>               [,1]</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  [1,] -0.545880758</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  [2,]  0.536585304</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  [3,]  0.419623149</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  [4,] -0.583627199</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  [5,]  0.847460017</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  [6,]  0.266021979</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  [7,]  0.444585270</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  [8,] -0.466495124</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  [9,] -0.848370044</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [10,]  0.002311942</span>
<span class="r-in"><span></span></span>
</code></pre></div>
    </div>
  </main><aside class="col-md-3"><nav id="toc" aria-label="Table of contents"><h2>On this page</h2>
    </nav></aside></div>


    <footer><div class="pkgdown-footer-left">
  <p>Developed by Michael Kammer.</p>
</div>

<div class="pkgdown-footer-right">
  <p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.1.1.</p>
</div>

    </footer></div>





  </body></html>

