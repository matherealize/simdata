<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><title>NORTA-based design specification — simdesign_norta • simdata</title><script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><link href="../deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet"><script src="../deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><link href="../deps/font-awesome-6.5.2/css/all.min.css" rel="stylesheet"><link href="../deps/font-awesome-6.5.2/css/v4-shims.min.css" rel="stylesheet"><script src="../deps/headroom-0.11.0/headroom.min.js"></script><script src="../deps/headroom-0.11.0/jQuery.headroom.min.js"></script><script src="../deps/bootstrap-toc-1.0.1/bootstrap-toc.min.js"></script><script src="../deps/clipboard.js-2.0.11/clipboard.min.js"></script><script src="../deps/search-1.0.0/autocomplete.jquery.min.js"></script><script src="../deps/search-1.0.0/fuse.min.js"></script><script src="../deps/search-1.0.0/mark.min.js"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="NORTA-based design specification — simdesign_norta"><meta name="description" content="Stores information necessary to simulate datasets based on the NORTA
procedure (Cario and Nelson 1997)."><meta property="og:description" content="Stores information necessary to simulate datasets based on the NORTA
procedure (Cario and Nelson 1997)."></head><body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>


    <nav class="navbar navbar-expand-lg fixed-top bg-light" data-bs-theme="light" aria-label="Site navigation"><div class="container">

    <a class="navbar-brand me-2" href="../index.html">simdata</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">0.4.1</small>


    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto"><li class="active nav-item"><a class="nav-link" href="../reference/index.html">Reference</a></li>
<li class="nav-item dropdown">
  <button class="nav-link dropdown-toggle" type="button" id="dropdown-articles" data-bs-toggle="dropdown" aria-expanded="false" aria-haspopup="true">Articles</button>
  <ul class="dropdown-menu" aria-labelledby="dropdown-articles"><li><a class="dropdown-item" href="../articles/Demo.html">simdata: A package for creating simulated datasets</a></li>
    <li><a class="dropdown-item" href="../articles/NORTA_demo.html">simdata: NORTA based simulation designs</a></li>
    <li><a class="dropdown-item" href="../articles/Technical_documentation.html">simdata: Technical documentation</a></li>
  </ul></li>
<li class="nav-item"><a class="nav-link" href="../news/index.html">Changelog</a></li>
      </ul><ul class="navbar-nav"><li class="nav-item"><form class="form-inline" role="search">
 <input class="form-control" type="search" name="search-input" id="search-input" autocomplete="off" aria-label="Search site" placeholder="Search for" data-search-index="../search.json"></form></li>
<li class="nav-item"><a class="external-link nav-link" href="https://github.com/matherealize/simdata/" aria-label="GitHub"><span class="fa fab fa-github fa-lg"></span></a></li>
      </ul></div>


  </div>
</nav><div class="container template-reference-topic">
<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">

      <h1>NORTA-based design specification</h1>
      <small class="dont-index">Source: <a href="https://github.com/matherealize/simdata/blob/main/R/simdesign.R" class="external-link"><code>R/simdesign.R</code></a></small>
      <div class="d-none name"><code>simdesign_norta.Rd</code></div>
    </div>

    <div class="ref-description section level2">
    <p>Stores information necessary to simulate datasets based on the NORTA
procedure (Cario and Nelson 1997).</p>
    </div>

    <div class="section level2">
    <h2 id="ref-usage">Usage<a class="anchor" aria-label="anchor" href="#ref-usage"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span><span class="fu">simdesign_norta</span><span class="op">(</span></span>
<span>  cor_target_final <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  cor_initial <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  dist <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span><span class="op">)</span>,</span>
<span>  tol_initial <span class="op">=</span> <span class="fl">0.001</span>,</span>
<span>  n_obs_initial <span class="op">=</span> <span class="fl">10000</span>,</span>
<span>  seed_initial <span class="op">=</span> <span class="fl">1</span>,</span>
<span>  conv_norm_type <span class="op">=</span> <span class="st">"O"</span>,</span>
<span>  method <span class="op">=</span> <span class="st">"svd"</span>,</span>
<span>  name <span class="op">=</span> <span class="st">"NORTA based simulation design"</span>,</span>
<span>  <span class="va">...</span></span>
<span><span class="op">)</span></span></code></pre></div>
    </div>

    <div class="section level2">
    <h2 id="arguments">Arguments<a class="anchor" aria-label="anchor" href="#arguments"></a></h2>


<dl><dt id="arg-cor-target-final">cor_target_final<a class="anchor" aria-label="anchor" href="#arg-cor-target-final"></a></dt>
<dd><p>Target correlation matrix for simulated datasets. At least one of
<code>cor_target_final</code> or <code>cor_initial</code> must be specified.</p></dd>


<dt id="arg-cor-initial">cor_initial<a class="anchor" aria-label="anchor" href="#arg-cor-initial"></a></dt>
<dd><p>Correlation matrix for underlying multivariate standard normal distribution
on which the final data is based on.  At least one of <code>cor_target_final</code> or
<code>cor_initial</code> must be specified. If NULL, then <code>cor_initial</code> will be
numerically optimized by simulation for the NORTA procedure using
<code>cor_target_final</code>.</p></dd>


<dt id="arg-dist">dist<a class="anchor" aria-label="anchor" href="#arg-dist"></a></dt>
<dd><p>List of functions of marginal distributions for simulated variables.
Must have the same length as the specified correlation matrix
(<code>cor_target_final</code> and / or <code>cor_inital</code>), and the order of the entries
must correspond to the variables in the correlation matrix. See details for
the specification of the marginal distributions.</p></dd>


<dt id="arg-tol-initial">tol_initial<a class="anchor" aria-label="anchor" href="#arg-tol-initial"></a></dt>
<dd><p>If <code>cor_initial</code> is numerically optimized, specifies the tolerance for the
difference to the target correlation <code>cor_target_final</code>. Parameter passed to
<code><a href="optimize_cor_for_pair.html">optimize_cor_for_pair</a></code>.</p></dd>


<dt id="arg-n-obs-initial">n_obs_initial<a class="anchor" aria-label="anchor" href="#arg-n-obs-initial"></a></dt>
<dd><p>If <code>cor_initial</code> is numerically optimized, specifies the number of draws in
simulation during optimization used to estimate correlations.
Parameter passed to <code><a href="optimize_cor_for_pair.html">optimize_cor_for_pair</a></code>.</p></dd>


<dt id="arg-seed-initial">seed_initial<a class="anchor" aria-label="anchor" href="#arg-seed-initial"></a></dt>
<dd><p>Seed used for draws of the initial distribution used during optimization
to estimate correlations.</p></dd>


<dt id="arg-conv-norm-type">conv_norm_type<a class="anchor" aria-label="anchor" href="#arg-conv-norm-type"></a></dt>
<dd><p>If <code>cor_initial</code> is numerically optimized and found not to be a proper
correlation matrix (i.e. not positive-definite), specifies the metric used to
find the nearest positive-definite correlation matrix.
Parameter passed to <code><a href="https://rdrr.io/pkg/Matrix/man/nearPD.html" class="external-link">Matrix::nearPD</a></code>
(conv.norm.type), see there for details.</p></dd>


<dt id="arg-method">method<a class="anchor" aria-label="anchor" href="#arg-method"></a></dt>
<dd><p><code>method</code> argument of <code><a href="https://rdrr.io/pkg/mvtnorm/man/Mvnorm.html" class="external-link">mvtnorm::rmvnorm</a></code>.</p></dd>


<dt id="arg-name">name<a class="anchor" aria-label="anchor" href="#arg-name"></a></dt>
<dd><p>Character, optional name of the simulation design.</p></dd>


<dt id="arg--">...<a class="anchor" aria-label="anchor" href="#arg--"></a></dt>
<dd><p>Further arguments are passed to the <code><a href="simdesign.html">simdesign</a></code> constructor.</p></dd>

</dl></div>
    <div class="section level2">
    <h2 id="value">Value<a class="anchor" aria-label="anchor" href="#value"></a></h2>
    <p>List object with class attribute "simdesign_norta" (S3 class), inheriting
from "simdesign". It contains the same entries as a <code><a href="simdesign.html">simdesign</a></code>
object but in addition the following entries:</p>
<dl><dt><code>cor_target_final</code></dt>
<dd></dd>

<dt><code>cor_initial</code></dt>
<dd><p>Initial correlation matrix of multivariate normal
distribution</p></dd>

<dt><code>dist</code></dt>
<dd></dd>

<dt><code>tol_initial</code></dt>
<dd></dd>

<dt><code>n_obs_initial</code></dt>
<dd></dd>

<dt><code>conv_norm_type</code></dt>
<dd></dd>

<dt><code>method</code></dt>
<dd></dd>


</dl></div>
    <div class="section level2">
    <h2 id="details">Details<a class="anchor" aria-label="anchor" href="#details"></a></h2>
    <p>This S3 class implements a simulation design based on the
NORmal-To-Anything (NORTA) procedure by Cario and Nelson (1997). See the
corresponding NORTA vignette for usage examples how to approximate real
datasets.</p>
    </div>
    <div class="section level2">
    <h2 id="data-generation">Data Generation<a class="anchor" aria-label="anchor" href="#data-generation"></a></h2>


<p>Data will be generated using the following procedure:</p><ol><li><p>An underlying data matrix <code>Z</code> is sampled from a
multivariate standard Normal distribution with correlation structure given by
<code>cor_initial</code>.</p></li>
<li><p><code>Z</code> is then transformed into a dataset <code>X</code> by applying
the functions given in <code>dist</code> to the columns of <code>Z</code>. The resulting dataset
<code>X</code> will then have the desired marginal distributions, and approximate the
target correlation <code>cor_target_final</code>, if specified.</p></li>
<li><p><code>X</code> is further transformed by the transformation <code>transform_initial</code>
(note that this may affect the correlation of the final dataset and is not
respected by the optimization procedure), and post-processed if specified.</p></li>
</ol></div>
    <div class="section level2">
    <h2 id="marginal-distributions">Marginal distributions<a class="anchor" aria-label="anchor" href="#marginal-distributions"></a></h2>


<p>A list of functions <code>dist</code> is used to define the marginal distributions of
the variables. Each entry must be a quantile function, i.e. a function
that maps <code>[0, 1]</code> to the domain of a probability distribution. Each entry
must take a single input vector, and return a single numeric vector.
Examples for acceptable entries include all standard quantile functions
implemented in R (e.g. <code>qnorm</code>, <code>qbinom</code>, ...), user defined functions
wrapping these (e.g. <code>function(x) = qnorm(x, mean = 10, sd = 4)</code>), or
empirical quantile functions. The helper function
<code></code><a href="quantile_functions_from_data.html">quantile_functions_from_data</a> can be used to automatically
estimate empirical quantile functions from a given data to reproduce it using
the NORTA approach.See the example in the NORTA vignette of this package for
workflow details.</p>
    </div>
    <div class="section level2">
    <h2 id="target-correlations">Target correlations<a class="anchor" aria-label="anchor" href="#target-correlations"></a></h2>


<p>Not every valid correlation matrix (i.e. symmetric, positive-definite matrix
with elements in <code>[-1, 1]</code> and unity diagonal) for a number of variables
is feasible for given desired marginal distributions (see e.g.
Ghosh and Henderson 2003). Therefore, if <code>cor_target_final</code> is specified
as target correlation, this class optimises <code>cor_initial</code> in such a
way, that the final simulated dataset has a correlation which approximates
<code>cor_target_final</code>. However, the actual correlation in the end may differ
if <code>cor_target_final</code> is infeasible for the given specification, or the
NORTA procedure cannot exactly reproduce the target correlation. In general,
however, approximations should be acceptable if target correlations and
marginal structures are derived from real datasets.
See e.g. Ghosh and Henderson 2003 for the motivation why this works.</p>
    </div>
    <div class="section level2">
    <h2 id="references">References<a class="anchor" aria-label="anchor" href="#references"></a></h2>
    <p>Cario, M. C. and Nelson, B. L. (1997) <em>Modeling and
generating random vectors with arbitrary marginal distributions and
correlation matrix</em>. Technical Report, Department of Industrial Engineering
and Management Sciences, Northwestern University, Evanston, Illinois.</p>
<p>Ghosh, S. and Henderson, S. G. (2003) <em>Behavior of the NORTA method
for correlated random vector generation as the dimension increases</em>. ACM
Transactions on Modeling and Computer Simulation.</p>
    </div>
    <div class="section level2">
    <h2 id="see-also">See also<a class="anchor" aria-label="anchor" href="#see-also"></a></h2>
    <div class="dont-index"><p><code><a href="simdesign.html">simdesign</a></code>,
<code><a href="simulate_data.html">simulate_data</a></code>,
<code><a href="simulate_data_conditional.html">simulate_data_conditional</a></code>,
<code><a href="quantile_functions_from_data.html">quantile_functions_from_data</a></code></p></div>
    </div>

  </main><aside class="col-md-3"><nav id="toc" aria-label="Table of contents"><h2>On this page</h2>
    </nav></aside></div>


    <footer><div class="pkgdown-footer-left">
  <p>Developed by Michael Kammer.</p>
</div>

<div class="pkgdown-footer-right">
  <p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.1.1.</p>
</div>

    </footer></div>





  </body></html>

